<view class="container">
  <!-- å›ºå®šé¡¶éƒ¨æœç´¢åŒºåŸŸ -->
<view class="header">
  <view class="search-wrapper">
    <!-- åŸå¸‚é€‰æ‹© + æœç´¢æ¡†éƒ¨åˆ† -->
    <view class="search-box">
      <view class="city-select" bindtap="onCityTap">
        <text class="city-text">{{ currentCity }} â–¾</text>
      </view>
      <view class="divider"></view>
      <!-- æœç´¢æ¡† -->
      <view class="search-bar" bindtap="onSearchTap">
        <image class="search-icon" src="/assets/search.png" />
        <text class="search-placeholder">è¾“å…¥æ™¯ç‚¹ã€åœ°å€å¯»æ‰¾é™„è¿‘é—¨åº—</text>
      </view>
    </view>

    <!-- åœ°å›¾æŒ‰é’® -->
    <view class="map-btn" bindtap="onMapTap">åœ°å›¾</view>
  </view>
</view>

<!-- æœç´¢è’™å±‚ -->
<view wx:if="{{showSearchMask}}" class="mask-layer">
  <view class="search-header">
    <input class="search-input" placeholder="è¯·è¾“å…¥é—¨åº—åã€åœ°å€" />
    <text class="cancel-btn" bindtap="onCancelSearch">å–æ¶ˆ</text>
  </view>
</view>

<view class="header-placeholder"></view>

  <!-- åœ°å›¾ -->
  <view class="map-container">
  <map
    id="storeMap"
    latitude="{{latitude}}"
    longitude="{{longitude}}"
    scale="14"
    show-location
    markers="{{markers}}"
    style="width: 100%; height: 100%;">
  </map>

  <!-- è¦†ç›–åœ¨åœ°å›¾ä¸Šçš„æŒ‰é’® -->
  <cover-view class="map-overlay">
    <cover-view class="view-map-btn" bindtap="onViewBigMap">çœ‹å¤§åœ°å›¾</cover-view>
  </cover-view>
</view>


  <!-- é—¨åº—åˆ—è¡¨ -->
  <view class="store-section">
    <!-- å·¦ä¾§åŒºåŸŸåˆ—è¡¨ -->
    <scroll-view scroll-y class="area-list" bindtap="onAreaTap">
      <block wx:for="{{areaList}}" wx:key="name">
        <view
          class="area-item {{selectedAreaIndex === index ? 'active' : ''}}"
          data-index="{{index}}"
        >{{item.name}}</view>
      </block>
    </scroll-view>

    <!-- å³ä¾§é—¨åº—åˆ—è¡¨ -->
    <scroll-view scroll-y class="store-list" bindscroll="onStoreScroll">
      <block wx:for="{{areaList}}" wx:key="name">
        <view class="area-section" id="area-{{index}}">
          <view class="area-title">{{item.name}}</view>
          <block wx:for="{{item.stores}}" wx:key="name">
            <view class="store-card">
              <view class="store-header">
                <text class="store-name">{{item.name}}</text>
                <text class="tag" wx:if="{{item.supportSelfReturn}}">éƒ¨åˆ†æ”¯æŒè‡ªåŠ©å–è¿˜</text>
                <text class="tag yellow" wx:if="{{item.beeBox}}">èœ‚å·¢æŸœ</text>
                <text class="tag orange" wx:if="{{item.orderableTomorrow}}">å¯ä¸‹å…¨å¤©è®¢å•</text>
              </view>
              <view class="store-addr">åœ°å€ï¼š{{item.address}}</view>
              <view class="store-time">è¥ä¸šæ—¶é—´ï¼š{{item.openTime}} - {{item.closeTime}}</view>
              <view class="store-actions">
                <button class="phone-btn">ğŸ“ ç”µè¯</button>
                <button class="guide-btn">ğŸ“ é—¨åº—æŒ‡å¼•</button>
              </view>
            </view>
          </block>
        </view>
      </block>
    </scroll-view>
  </view>
</view>
