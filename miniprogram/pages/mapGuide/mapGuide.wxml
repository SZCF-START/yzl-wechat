<view class="map-page">
  <!-- æœç´¢æ¡†åŒºåŸŸ -->
  <view class="header">
    <view class="search-wrapper">
      <!-- åŸå¸‚é€‰æ‹© + æœç´¢æ¡†éƒ¨åˆ† -->
      <view class="search-box">
        <view class="city-select" bindtap="onCityTap">
          <text class="city-text">{{ currentCity }} â–¾</text>
        </view>
        <view class="divider"></view>
        <!-- æœç´¢æ¡† -->
        <view class="search-bar" bindtap="onSearchTap">
          <image class="search-icon" src="/assets/search.png" />
          <text class="search-placeholder">è¾“å…¥æ™¯ç‚¹ã€åœ°å€å¯»æ‰¾é™„è¿‘é—¨åº—</text>
        </view>
      </view>

      <!-- åˆ—è¡¨æŒ‰é’® -->
      <view class="map-btn" bindtap="onListTap">åˆ—è¡¨</view>
    </view>
  </view>

  <!-- æœç´¢è’™å±‚ -->
  <view wx:if="{{showSearchMask}}" class="mask-layer">
    <view class="search-header">
      <input class="search-input" placeholder="è¯·è¾“å…¥é—¨åº—åã€åœ°å€" />
      <text class="cancel-btn" bindtap="onCancelSearch">å–æ¶ˆ</text>
    </view>
  </view>

  <!-- åœ°å›¾åŒºåŸŸ -->
  <map class="map"
       id="storeMap"
       longitude="{{longitude}}"
       latitude="{{latitude}}"
       markers="{{markers}}"
       show-location="true"
       scale="14">
  </map>

  <!-- æ‚¬æµ®é—¨åº—ä¿¡æ¯å¡ç‰‡ -->
  <view class="store-popup">
    <view class="store-header">
      <view class="store-title">{{selectedStore.name}}</view>
      <view class="store-tags" wx:if="{{selectedStore.tag}}">
        <text class="store-tag">{{selectedStore.tag}}</text>
      </view>
      <view class="store-icons">
        <button class="icon-btn" open-type="makePhoneCall" data-phone="{{selectedStore.phone}}" bindtap="onCall">
          <image src="/images/icon-phone.png" class="icon-img" />
        </button>
        <button class="icon-btn" bindtap="onGuide">
          <image src="/images/icon-location.png" class="icon-img" />
        </button>
      </view>
    </view>

    <view class="store-body">
      <view class="store-addr">ğŸ“{{selectedStore.address}}</view>
      <view class="store-time">ğŸ•’ {{selectedStore.openTime}} - {{selectedStore.closeTime}}</view>
    </view>

    

    <view class="rent-btn" bindtap="onRent">ç§Ÿè½¦</view>
  </view>


  <!-- å®šä½æŒ‰é’® -->
  <button class="location-btn" bindtap="onLocate">å®šä½</button>
</view>
