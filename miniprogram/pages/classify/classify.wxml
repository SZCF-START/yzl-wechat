<view class="container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="header">
    <view class="search-wrapper">
      <view class="search-box">
        <view class="city-select" bindtap="onCityTap">
          <text class="city-text">{{ currentCity }} â–¾</text>
        </view>
        <view class="divider"></view>
        <view class="search-bar" bindtap="onSearchTap">
          <image class="search-icon" src="/assets/search.png" />
          <text class="search-placeholder">è¾“å…¥æ™¯ç‚¹ã€åœ°å€å¯»æ‰¾é™„è¿‘é—¨åº—</text>
        </view>
      </view>
      <view class="map-btn" bindtap="onMapTap">åœ°å›¾</view>
    </view>
  </view>

  <!-- åœ°å›¾åŒºåŸŸ -->
  <view class="map-container">
    <map
      id="storeMap"
      latitude="{{latitude}}"
      longitude="{{longitude}}"
      scale="16"
      show-location
      markers="{{markers}}"
      style="width: 100%; height: 100%;">
    </map>
  </view>

  <!-- é—¨åº—åˆ—è¡¨åŒæ åŒº -->
  <view class="store-section">
    <!-- å·¦ä¾§åŒºåŸŸåˆ—è¡¨ -->
    <scroll-view scroll-y class="area-list">
      <block wx:for="{{areaList}}" wx:key="name">
        <view
          class="area-item {{selectedAreaIndex === index ? 'active' : ''}}"
          data-index="{{index}}"
          bindtap="onAreaTap"
        >{{item.name}}</view>
      </block>
    </scroll-view>

    <!-- å³ä¾§é—¨åº—å±•ç¤º -->
    <scroll-view scroll-y class="store-list">
      <view class="area-section">
        <block wx:for="{{selectedAreaStores}}" wx:key="name">
          <view class="store-card">
            <view class="store-header">
              <text class="store-name">{{item.name}}</text>
              <text class="tag" wx:if="{{item.supportSelfReturn}}">éƒ¨åˆ†æ”¯æŒè‡ªåŠ©å–è¿˜</text>
              <text class="tag yellow" wx:if="{{item.beeBox}}">èœ‚å·¢æŸœ</text>
              <text class="tag orange" wx:if="{{item.orderableTomorrow}}">å¯ä¸‹å…¨å¤©è®¢å•</text>
            </view>
            <view class="store-addr">åœ°å€ï¼š{{item.address}}</view>
            <view class="store-time">è¥ä¸šæ—¶é—´ï¼š{{item.openTime}} - {{item.closeTime}}</view>
            <view class="store-actions">
              <button class="phone-btn">ğŸ“ ç”µè¯</button>
              <button class="guide-btn">ğŸ“ é—¨åº—æŒ‡å¼•</button>
            </view>
          </view>
        </block>
      </view>
    </scroll-view>
  </view>
</view>
